# 提取对话框两栏布局实现说明

## 概述
已成功将 `ExtractDialog.vue` 和 `BatchExtractDialog.vue` 两个组件改造为左右两栏布局，参考 `history/index.vue` 的实现方式。

## 实现的功能

### 1. ExtractDialog.vue（单个文档提取对话框）
- **左侧面板**：显示原始文档预览
  - 支持 DOCX 文档预览（使用 docx-preview 库）
  - 支持 PDF 文档预览（使用 iframe）
  - 支持图片预览（JPG、JPEG、PNG、TIFF）
  - 不支持的文件类型显示下载提示
  - 提供下载按钮

- **右侧面板**：显示提取的结构化要素
  - 基本信息（案号、案件名称、文书类型、处理时间）
  - 被告人信息表格
  - 指控罪名标签
  - 事实概要
  - 证据列表
  - 法律依据
  - 处理结果
  - 特定字段
  - 提供导出要素按钮

### 2. BatchExtractDialog.vue（批量提取对话框）
- 保留原有的配置和进度显示功能
- **提取结果展示**：每个标签页采用两栏布局
  - **左侧面板**：显示对应文档的原始预览
    - 支持 DOCX、PDF、图片预览
    - 提供下载按钮
  - **右侧面板**：显示该文档的提取要素
    - 与 ExtractDialog 相同的结构化信息展示
    - 提供单个文档导出按钮
- 智能加载：切换标签页时自动加载对应文档预览
- 首次提取完成后自动加载第一个成功结果的预览

## 技术实现

### 核心功能
1. **文档预览**
   - DOCX：使用 `docx-preview` 库的 `renderAsync` 方法
   - PDF：使用 iframe 嵌入预览 URL
   - 图片：直接使用 img 标签显示

2. **响应式布局**
   - 使用 Flexbox 实现左右两栏等宽布局（各占 50%）
   - 全屏对话框（fullscreen）以提供更大的查看空间
   - 左右面板独立滚动

3. **样式优化**
   - 参考 history/index.vue 的样式设计
   - 统一的面板头部样式
   - 优化的 DOCX 预览容器样式
   - 卡片式的信息展示

### 新增依赖
- `docx-preview`：DOCX 文档预览
- `@/api/documents`：文档下载和预览 API
- `@/store/modules/user`：用户认证信息

### 新增图标
- `Download`：下载按钮
- `Document`：文档图标

## 使用说明

### ExtractDialog
```vue
<ExtractDialog
  v-model="dialogVisible"
  :extract-data="extractResult"
/>
```

### BatchExtractDialog
```vue
<BatchExtractDialog
  v-model="batchDialogVisible"
  :selected-docs="selectedDocuments"
  @success="handleSuccess"
/>
```

## 注意事项
1. 确保后端 API 支持文档预览和下载功能
2. DOCX 预览需要浏览器支持现代 Web 标准
3. 大文件预览可能需要较长加载时间
4. 建议在生产环境中添加预览失败的错误处理

## 文件修改清单
- ✅ `src/views/documents/components/ExtractDialog.vue`
- ✅ `src/views/documents/components/BatchExtractDialog.vue`

## 测试建议
1. 测试不同文件类型的预览（DOCX、PDF、图片）
2. 测试批量提取时的标签页切换
3. 测试下载功能
4. 测试导出功能（待实现）
5. 测试大文件的加载性能
