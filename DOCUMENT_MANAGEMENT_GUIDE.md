# 文书管理系统使用指南

## 功能概述

本系统实现了完整的法律文书管理功能，包括文书上传、解析、结构化提取和智能比对等核心功能。

## 主要功能模块

### 1. 文书列表 (`/documents/list`)

#### 功能特性
- **文档检索**：支持按案件编号、文书类型、解析状态进行筛选
- **批量操作**：支持批量选择文书进行提取和比对
- **实时状态**：显示文档解析状态、文件大小、创建时间等信息
- **快捷操作**：每个文书提供查看详情、结构化提取、发起比对等快捷按钮

#### 使用说明
1. 进入文书列表页面
2. 使用顶部搜索栏筛选文档
3. 勾选需要操作的文书
4. 点击对应的批量操作按钮

### 2. 文书上传

#### 功能特性
- **多格式支持**：支持 PDF、Word、扫描件、图片格式
- **批量上传**：单次最多上传 100 份文件
- **拖拽上传**：支持拖拽文件到上传区域
- **实时进度**：显示上传和解析进度，包括已完成数量和预计剩余时间
- **断点续传**：支持上传中断后继续上传

#### 使用说明
1. 点击"上传文书"按钮
2. 拖拽文件或点击选择文件
3. 点击"开始上传"
4. 等待解析完成

### 3. 结构化提取

#### 功能特性
- **智能提取**：自动提取案号、案件名称、被告人信息、罪名等核心要素
- **批量处理**：支持批量提取多份文书
- **结果展示**：以结构化方式展示提取结果
- **数据导出**：支持导出提取结果

#### 提取字段
- 基础信息：案号、案件名称、文书类型
- 被告人信息：姓名、性别、出生日期、身份证号、住址
- 案件信息：指控罪名、事实概要、证据列表、法律依据、处理结果
- 特定字段：公诉机关、侦查机关、辩护人、审判机关等

#### 使用说明
1. 在文书列表中选择文书
2. 点击"批量提取"或单个文书的"结构化提取"
3. 等待提取完成
4. 查看和导出提取结果

### 4. 文书比对

#### 功能特性
- **智能比对**：基于 LLM 的智能要素比对
- **差异分析**：自动识别文书间的差异并标注严重程度
- **风险评估**：对差异项进行风险评估和原因分析
- **处理建议**：提供针对性的处理建议
- **可视化展示**：左右分栏对比展示差异内容

#### 比对维度
- 被告人信息一致性
- 案发时间、地点一致性
- 罪名与指控一致性
- 涉案金额差异
- 关键时间点冲突

#### 使用说明
1. 在文书列表中选择至少 2 份文书
2. 点击"文书比对"按钮
3. 选择比对类型（自定义或预设组合）
4. 点击"开始比对"
5. 查看比对结果和差异详情
6. 导出比对报告

## API 接口说明

### 1. 获取文档列表
```
GET /api/documents/
```

### 2. 批量上传
```
POST /api/documents/batch-upload
Content-Type: multipart/form-data
```

### 3. 查询上传进度
```
GET /api/documents/batch-status/{batch_id}
```

### 4. 批量结构化提取
```
POST /api/elements/batch-structured-extract
Body: { doc_ids: ["doc_id1", "doc_id2"] }
```

### 5. 文书对比
```
POST /api/comparison/compare
Body: { doc_ids: ["doc_id1", "doc_id2"], comparison_type: "custom" }
```

## 技术实现

### 前端技术栈
- Vue 3 + TypeScript
- Element Plus UI 组件库
- Pinia 状态管理
- Vue Router 路由管理
- Axios HTTP 请求

### 核心组件
- `DocumentList.vue` - 文书列表主页面
- `UploadDialog.vue` - 上传对话框组件
- `ExtractDialog.vue` - 提取结果展示组件
- `CompareDialog.vue` - 比对结果展示组件

### API 封装
- `src/api/documents.ts` - 文书管理 API 接口
- `src/types/api/documents.d.ts` - TypeScript 类型定义

## 权限控制

系统支持三级权限：
- **超级管理员 (R_SUPER)**：所有功能权限
- **管理员 (R_ADMIN)**：文书管理、审查、比对权限
- **普通用户 (R_USER)**：查看和基础操作权限

## 注意事项

1. **文件格式**：确保上传的文件格式正确（PDF、Word、图片）
2. **文件大小**：单个文件建议不超过 10MB
3. **批量操作**：批量上传建议每次不超过 50 份文件
4. **网络环境**：确保网络连接稳定，避免上传中断
5. **数据安全**：敏感信息已进行脱敏处理

## 常见问题

### Q1: 上传失败怎么办？
A: 检查文件格式是否正确，文件是否损坏，网络连接是否正常。

### Q2: 提取结果不准确怎么办？
A: 可以手动编辑提取结果，或重新上传清晰度更高的文件。

### Q3: 比对结果如何理解？
A: 系统会标注差异的严重程度（高、中、低），并提供详细的分析和建议。

### Q4: 如何导出数据？
A: 在提取结果或比对结果页面点击"导出"按钮，支持导出为 PDF 或 Word 格式。

## 更新日志

### v1.0.0 (2026-02-06)
- ✅ 实现文书列表展示和检索
- ✅ 实现批量上传功能
- ✅ 实现结构化提取功能
- ✅ 实现智能比对功能
- ✅ 集成后端 API 接口
- ✅ 完善权限控制

## 技术支持

如有问题，请联系技术支持团队。
