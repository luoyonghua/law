**基础URL**: `https://law_cwd.app.xdo.icu:443/`

## 1、获取文档列表

请求地址：/api/documents/

请求方法：get

```
{
    "code": 200,
    "msg": "文档列表获取成功，共 10 个文档",
    "data": [
        {
            "doc_id": "doc_00b999a82c8d",
            "file_name": "审查逮捕意见书_张三案.docx",
            "case_id": "case_1770353270385",
            "doc_type": "审查报告",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 1030,
            "file_size": 38240,
            "created_at": "2026-02-06T04:47:50"
        },
        {
            "doc_id": "doc_2aafc92a4084",
            "file_name": "02_刑事判决书_样本.docx",
            "case_id": "case_1770351145437",
            "doc_type": "判决书",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 550,
            "file_size": 37548,
            "created_at": "2026-02-06T04:12:26"
        },
        {
            "doc_id": "doc_9443ee6efcf1",
            "file_name": "01_起诉书_样本.docx",
            "case_id": "case_1770351145437",
            "doc_type": "起诉书",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 624,
            "file_size": 29923,
            "created_at": "2026-02-06T04:12:26"
        },
        {
            "doc_id": "doc_9c5126abd9b5",
            "file_name": "审查逮捕意见书_张三案.docx",
            "case_id": "case_1770292933933",
            "doc_type": "审查报告",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 1030,
            "file_size": 38240,
            "created_at": "2026-02-05T12:02:14"
        },
        {
            "doc_id": "doc_51f31ae7fabd",
            "file_name": "审查逮捕意见书（检察）.docx",
            "case_id": "case_1770281835294",
            "doc_type": "审查报告",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 567,
            "file_size": 16024,
            "created_at": "2026-02-05T08:57:15"
        },
        {
            "doc_id": "doc_fe7f3a7f149c",
            "file_name": "提请批准逮捕书（公安）.docx",
            "case_id": "case_1770281835294",
            "doc_type": "待识别",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 595,
            "file_size": 15868,
            "created_at": "2026-02-05T08:57:15"
        },
        {
            "doc_id": "doc_8ad93743c056",
            "file_name": "退回补充侦查提纲（检察）.docx",
            "case_id": "case_1770216937803",
            "doc_type": "退回补充侦查提纲",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 215,
            "file_size": 15340,
            "created_at": "2026-02-04T14:55:38"
        },
        {
            "doc_id": "doc_be3a84d8888a",
            "file_name": "补充侦查报告（公安）.docx",
            "case_id": "case_1770216937803",
            "doc_type": "补充侦查报告",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 179,
            "file_size": 15219,
            "created_at": "2026-02-04T14:55:38"
        },
        {
            "doc_id": "doc_681c6c3654ac",
            "file_name": "公诉审查报告（检察）.docx",
            "case_id": "case_1770216760341",
            "doc_type": "审查报告",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 494,
            "file_size": 15767,
            "created_at": "2026-02-04T14:52:40"
        },
        {
            "doc_id": "doc_f6d6789f89ea",
            "file_name": "起诉意见书（公安）.docx",
            "case_id": "case_1770216760341",
            "doc_type": "起诉书",
            "parse_status": "completed",
            "ocr_confidence": "1.00",
            "text_length": 422,
            "file_size": 15538,
            "created_at": "2026-02-04T14:52:40"
        }
    ]
}
```

## 2、批量上传 

 POST  `/api/documents/batch-upload`

```
{
    "code": 200,
    "msg": "批量上传成功，接收 1 个文件",
    "data": {
        "batch_id": "batch_35ac87b0afac",
        "total_files": 1,
        "valid_files": 1,
        "task_ids": [
            "ocr_doc_00b999a82c8d"
        ]
    }
}
```

## 3、查询上传进度

get `/api/documents/batch-status/{batch_id}`

这个id就是上一个接口返回的batch_id

```
{
    "code": 200,
    "msg": "批次状态获取成功",
    "data": {
        "batch_id": "batch_35ac87b0afac",
        "total_files": 1,
        "completed_files": 1,
        "failed_files": 0,
        "processing_files": 0,
        "pending_files": 0,
        "total_tasks": 1,
        "completed_tasks": 1,
        "failed_tasks": 0,
        "processing_tasks": 0,
        "pending_tasks": 0,
        "progress_percentage": 100.0,
        "status": "completed",
        "detailed_status": [
            {
                "task_id": "ocr_doc_00b999a82c8d",
                "state": "SUCCESS",
                "info": {
                    "percentage": 100,
                    "step": "执行成功",
                    "result": {
                        "status": "success",
                        "doc_id": "doc_00b999a82c8d",
                        "text_length": 1030,
                        "from_cache": true
                    }
                }
            }
        ]
    }
}
```

## 4、批量结构化提取

post`/api/elements/batch-structured-extract`

参数：

```
{doc_ids: ["doc_00b999a82c8d"]}
```

```
{
    "code": 200,
    "msg": "批量提取完成，成功 1 个",
    "data": {
        "total": 1,
        "success_count": 1,
        "fail_count": 0,
        "results": [
            {
                "doc_id": "doc_00b999a82c8d",
                "file_name": "审查逮捕意见书_张三案.docx",
                "success": true,
                "data": {
                    "案号": "京朝检刑捕〔2024〕001号",
                    "案件名称": "张三盗窃案",
                    "文书类型": "审查逮捕意见书",
                    "被告人信息": [
                        {
                            "姓名": "张三",
                            "性别": "男",
                            "出生日期": "1985年3月15日",
                            "身份证号": "110101198503150011",
                            "住址": "北京市朝阳区望京街道456号"
                        }
                    ],
                    "指控罪名": [
                        "盗窃罪"
                    ],
                    "事实概要": "2024年1月10日14时许，张三在北京市朝阳区某商场一楼趁被害人李四不备，窃取其放置在柜台上的苹果手机一部（型号：iPhone 14 Pro，价值8000元），并于次日将手机以5000元价格销赃。2024年1月11日被抓获归案。",
                    "证据列表": [
                        "被害人李四的陈述和辨认笔录",
                        "犯罪嫌疑人张三的供述",
                        "商场监控录像",
                        "手机销赃记录和收购人李某的证言",
                        "价格鉴定意见书",
                        "张三的户籍信息、身份证明等书证"
                    ],
                    "法律依据": [
                        "《中华人民共和国刑法》第二百六十四条",
                        "《中华人民共和国刑事诉讼法》第八十一条",
                        "《中华人民共和国刑事诉讼法》第九十一条"
                    ],
                    "处理结果": "决定批准逮捕犯罪嫌疑人张三",
                    "特定字段": {
                        "公诉机关": "",
                        "侦查机关": "北京市公安局朝阳分局",
                        "辩护人": "",
                        "审判机关": "",
                        "审判人员": [],
                        "判决日期": "",
                        "逮捕必要性理由": "张三无固定住所和稳定收入来源，且无家庭成员在本地，有逃跑的现实可能性。如不予逮捕，可能妨碍刑事诉讼的顺利进行。",
                        "社会危险性分析": "",
                        "补充侦查意见": [],
                        "补充侦查期限": "",
                        "量刑建议": "",
                        "侦查监督意见": "",
                        "审查结论": "犯罪嫌疑人张三涉嫌盗窃罪，事实清楚，证据确实、充分，符合逮捕条件。"
                    }
                },
                "processing_time": 18.478702,
                "extraction_id": "b6b91ac8-85b4-4148-872e-f5c852f85017"
            }
        ]
    }
}
```

## 5、文书对比

post  /api/comparison/compare

参数：{doc_ids: ["doc_00b999a82c8d", "doc_2aafc92a4084", "doc_9443ee6efcf1"], comparison_type: "custom"}

```
{
    "code": 200,
    "msg": "文书对比完成（基于要素的智能对比）",
    "data": {
        "comparison_id": "llm_elements_226308e42ee7",
        "doc_ids": [
            "doc_00b999a82c8d",
            "doc_2aafc92a4084",
            "doc_9443ee6efcf1"
        ],
        "total_elements": 20,
        "matched_count": 0,
        "match_rate": 0.1,
        "differences": [
            {
                "element": "被告人信息不一致",
                "severity": "高",
                "description": "被告人姓名、出生日期及身份证号码均不一致，案涉主体完全不同。文书A中的张三与文书B中的林某某并非同一人，且出生日期和身份证号存在明显差异，构成根本性事实错误。",
                "doc_a_value": "姓名: 张三, 出生日期: 1985年3月15日, 身份证号: 110101198503150011",
                "doc_b_value": "姓名: 林某某, 出生日期: 1985年5月13日, 身份证号: ",
                "possible_reason": "严重的人事信息混淆或文书误标，可能源于录入错误、文件混用或系统传输故障，属于人为操作失误。",
                "risk_assessment": "存在重大程序违法和实体错误风险，若未及时纠正，可能导致司法公信力受损及后续执行困难，甚至引发当事人申诉或行政复议。"
            },
            {
                "element": "案发时间矛盾",
                "severity": "高",
                "description": "文书A案发时间为2024年1月，而文书B的案发时间是2023年4月至8月，时间上相差一年，且犯罪类型完全不同（盗窃 vs 诈骗+偷越国境），构成事实层面的根本性脱节。",
                "doc_a_value": "2024年1月10日14时许，张三在北京市朝阳区某商场一楼趁被害人李四不备，窃取其放置在柜台上的苹果手机一部（型号：iPhone 14 Pro，价值8000元）",
                "doc_b_value": "2023年4月至8月，被告人林某某参与诈骗团伙，骗取被害人王某某30,000元、李某某18,000元，合计48,000元；同时存在偷越国(边)境行为",
                "possible_reason": "案情信息严重错配，可能是案件编号或文书归属错误，也可能是不同案件被错误合并或误标为同一案件。",
                "risk_assessment": "时间矛盾直接导致犯罪行为的因果链条断裂，属于严重的事实错误，可能构成程序违法和证据无效风险。"
            },
            {
                "element": "罪名与指控不一致",
                "severity": "中",
                "description": "文书A认定为单一盗窃罪，而文书B涉及两个独立罪名：诈骗罪与偷越国（边）境罪。犯罪性质完全不同，前者属财产性犯罪，后者属跨境违法或身份类犯罪，二者在构成要件、证据基础和法律适用上存在本质差异。",
                "doc_a_value": "指控罪名: ['盗窃罪']",
                "doc_b_value": "指控罪名: ['诈骗罪', '偷越国(边)境罪']",
                "possible_reason": "可能是司法实践中对行为定性的深化或补充侦查结果的体现，但若缺乏对应事实支持，则属于擅自扩展罪名或程序违规。",
                "risk_assessment": "罪名扩大可能违反‘罪刑法定’原则，若无充分证据支撑，存在量刑过重和实体错误风险。"
            },
            {
                "element": "涉案金额差异/事实遗漏",
                "severity": "高",
                "description": "文书A涉案金额为8000元（含销赃5000元），而文书B涉案金额高达48,000元，数量级相差6倍以上。且作案方式从‘盗窃’变为‘诈骗’，行为模式完全不同，未见任何关于手机或柜台盗窃的描述。",
                "doc_a_value": "价值8000元，于次日以5000元价格销赃",
                "doc_b_value": "骗取被害人王某某30,000元、李某某18,000元，合计48,000元",
                "possible_reason": "可能是案件数据错误录入、不同案件混淆或金额估算偏差所致，缺乏事实依据支撑金额跃升。",
                "risk_assessment": "涉案金额严重失实可能影响量刑幅度和赔偿责任认定，存在明显证据不足或伪造风险。"
            },
            {
                "element": "地点和作案方式冲突",
                "severity": "高",
                "description": "文书A的犯罪发生地为北京朝阳区，而文书B的被告人住址及行为地点在江西萍乡，空间位置和地理背景完全不同，不存在作案地点的合理衔接。",
                "doc_a_value": "北京市朝阳区某商场一楼",
                "doc_b_value": "江西省萍乡市莲花县",
                "possible_reason": "可能因案件编号混淆或跨区域案件误配所致，缺乏合理的时空关联逻辑。",
                "risk_assessment": "地点不一致严重削弱案件连贯性与证据效力，可能导致整个事实链条断裂，影响司法认定的可信度。"
            },
            {
                "element": "关键时间点冲突",
                "severity": "高",
                "description": "文书A的犯罪时间是2024年初，而文书B为2023年中后期，时间上存在至少一年之差，且行为性质完全不同，无法构成同一事件的时间延续。",
                "doc_a_value": "2024年1月10日发生盗窃行为，次日被抓获归案",
                "doc_b_value": "2023年4月至8月期间实施诈骗活动",
                "possible_reason": "明显属于不同案件之间的信息错误嫁接或系统数据错乱导致的严重脱节。",
                "risk_assessment": "时间矛盾直接破坏事实认定基础，可能导致证据采信无效、程序违法，甚至构成虚假诉讼风险。"
            }
        ],
        "summary": "✨ 基于要素的LLM智能对比。两份文书在案涉主体、时间、地点、行为性质及涉案金额等核心要素上存在根本性矛盾和严重不一致，明显属于不同案件之间的信息错配或人为误操作。建议立即中止其关联使用，并对原始资料进行重新审查与校正，以保障司法程序的合法性与准确性。 主要风险：被告人身份信息错误，主体错配，涉嫌伪造或误传文书, 案发时间、地点、金额严重不符，事实基础完全断裂, 罪名从单一盗窃扩大至诈骗与偷越国境，缺乏证据支持, 涉案金额夸大，存在量刑失衡和证据不足风险, 两份文书内容无实质关联，属于不同案件的误用或系统错误",
        "created_at": "2026-02-06T05:13:24.036734",
        "comparison_method": "llm_elements",
        "detailed_result": {
            "similarity": 0.1,
            "fact_differences": [
                {
                    "category": "被告人信息不一致",
                    "text_in_doc_A": "姓名: 张三, 出生日期: 1985年3月15日, 身份证号: 110101198503150011",
                    "text_in_doc_B": "姓名: 林某某, 出生日期: 1985年5月13日, 身份证号: ",
                    "analysis": "被告人姓名、出生日期及身份证号码均不一致，案涉主体完全不同。文书A中的张三与文书B中的林某某并非同一人，且出生日期和身份证号存在明显差异，构成根本性事实错误。",
                    "possible_reason": "严重的人事信息混淆或文书误标，可能源于录入错误、文件混用或系统传输故障，属于人为操作失误。",
                    "severity": "高",
                    "risk_assessment": "存在重大程序违法和实体错误风险，若未及时纠正，可能导致司法公信力受损及后续执行困难，甚至引发当事人申诉或行政复议。",
                    "suggestion": "立即核实两份文书的来源与关联性，确认是否存在文件错配、误传或系统输入错误；如确为不同案件，应明确标注并分离处理，避免误导司法判断。"
                },
                {
                    "category": "案发时间矛盾",
                    "text_in_doc_A": "2024年1月10日14时许，张三在北京市朝阳区某商场一楼趁被害人李四不备，窃取其放置在柜台上的苹果手机一部（型号：iPhone 14 Pro，价值8000元）",
                    "text_in_doc_B": "2023年4月至8月，被告人林某某参与诈骗团伙，骗取被害人王某某30,000元、李某某18,000元，合计48,000元；同时存在偷越国(边)境行为",
                    "analysis": "文书A案发时间为2024年1月，而文书B的案发时间是2023年4月至8月，时间上相差一年，且犯罪类型完全不同（盗窃 vs 诈骗+偷越国境），构成事实层面的根本性脱节。",
                    "possible_reason": "案情信息严重错配，可能是案件编号或文书归属错误，也可能是不同案件被错误合并或误标为同一案件。",
                    "severity": "高",
                    "risk_assessment": "时间矛盾直接导致犯罪行为的因果链条断裂，属于严重的事实错误，可能构成程序违法和证据无效风险。",
                    "suggestion": "必须重新核查两份文书是否对应真实存在的关联案件，若无实质联系，则应明确区分并退回处理，禁止将不同案件内容混用或合并表述。"
                },
                {
                    "category": "罪名与指控不一致",
                    "text_in_doc_A": "指控罪名: ['盗窃罪']",
                    "text_in_doc_B": "指控罪名: ['诈骗罪', '偷越国(边)境罪']",
                    "analysis": "文书A认定为单一盗窃罪，而文书B涉及两个独立罪名：诈骗罪与偷越国（边）境罪。犯罪性质完全不同，前者属财产性犯罪，后者属跨境违法或身份类犯罪，二者在构成要件、证据基础和法律适用上存在本质差异。",
                    "possible_reason": "可能是司法实践中对行为定性的深化或补充侦查结果的体现，但若缺乏对应事实支持，则属于擅自扩展罪名或程序违规。",
                    "severity": "中",
                    "risk_assessment": "罪名扩大可能违反‘罪刑法定’原则，若无充分证据支撑，存在量刑过重和实体错误风险。",
                    "suggestion": "应核查文书B是否基于新增证据（如通话记录、跨境轨迹等）进行定性调整，并确保与事实相符；否则建议重新审查定罪依据的合法性。"
                },
                {
                    "category": "涉案金额差异/事实遗漏",
                    "text_in_doc_A": "价值8000元，于次日以5000元价格销赃",
                    "text_in_doc_B": "骗取被害人王某某30,000元、李某某18,000元，合计48,000元",
                    "analysis": "文书A涉案金额为8000元（含销赃5000元），而文书B涉案金额高达48,000元，数量级相差6倍以上。且作案方式从‘盗窃’变为‘诈骗’，行为模式完全不同，未见任何关于手机或柜台盗窃的描述。",
                    "possible_reason": "可能是案件数据错误录入、不同案件混淆或金额估算偏差所致，缺乏事实依据支撑金额跃升。",
                    "severity": "高",
                    "risk_assessment": "涉案金额严重失实可能影响量刑幅度和赔偿责任认定，存在明显证据不足或伪造风险。",
                    "suggestion": "要求补充相关资金流向、转账记录及被害人陈述等原始证据链，核实金额来源与行为逻辑是否成立；若无法证明，则应重新评估案件事实基础。"
                },
                {
                    "category": "地点和作案方式冲突",
                    "text_in_doc_A": "北京市朝阳区某商场一楼",
                    "text_in_doc_B": "江西省萍乡市莲花县",
                    "analysis": "文书A的犯罪发生地为北京朝阳区，而文书B的被告人住址及行为地点在江西萍乡，空间位置和地理背景完全不同，不存在作案地点的合理衔接。",
                    "possible_reason": "可能因案件编号混淆或跨区域案件误配所致，缺乏合理的时空关联逻辑。",
                    "severity": "高",
                    "risk_assessment": "地点不一致严重削弱案件连贯性与证据效力，可能导致整个事实链条断裂，影响司法认定的可信度。",
                    "suggestion": "应立即核实两份文书是否属于同一案号或不同案件，确认是否存在系统错误、信息误传或人为篡改行为。"
                },
                {
                    "category": "关键时间点冲突",
                    "text_in_doc_A": "2024年1月10日发生盗窃行为，次日被抓获归案",
                    "text_in_doc_B": "2023年4月至8月期间实施诈骗活动",
                    "analysis": "文书A的犯罪时间是2024年初，而文书B为2023年中后期，时间上存在至少一年之差，且行为性质完全不同，无法构成同一事件的时间延续。",
                    "possible_reason": "明显属于不同案件之间的信息错误嫁接或系统数据错乱导致的严重脱节。",
                    "severity": "高",
                    "risk_assessment": "时间矛盾直接破坏事实认定基础，可能导致证据采信无效、程序违法，甚至构成虚假诉讼风险。",
                    "suggestion": "必须严格区分两份文书对应的案件信息，禁止将不同时间、地点和行为的犯罪事实混用或合并处理。"
                }
            ],
            "summary": {
                "overall_consistency": "严重不一致",
                "total_differences": 6,
                "high_severity_count": 5,
                "medium_severity_count": 1,
                "low_severity_count": 0,
                "main_risks": [
                    "被告人身份信息错误，主体错配，涉嫌伪造或误传文书",
                    "案发时间、地点、金额严重不符，事实基础完全断裂",
                    "罪名从单一盗窃扩大至诈骗与偷越国境，缺乏证据支持",
                    "涉案金额夸大，存在量刑失衡和证据不足风险",
                    "两份文书内容无实质关联，属于不同案件的误用或系统错误"
                ],
                "recommendations": [
                    "立即停止将文书A与文书B作为关联案件进行司法参考或处理",
                    "核查所有文书来源，确认是否存在文件编号、案号混淆或录入失误",
                    "要求相关办案单位重新核实被告人身份、时间、地点和金额等核心要素",
                    "对文书B的定罪依据进行全面审查，确保罪名与事实相符",
                    "建议启动内部司法文书质量检查机制，防范类似错误再次发生"
                ],
                "conclusion": "两份文书在案涉主体、时间、地点、行为性质及涉案金额等核心要素上存在根本性矛盾和严重不一致，明显属于不同案件之间的信息错配或人为误操作。建议立即中止其关联使用，并对原始资料进行重新审查与校正，以保障司法程序的合法性与准确性。"
            }
        }
    }
}
```

